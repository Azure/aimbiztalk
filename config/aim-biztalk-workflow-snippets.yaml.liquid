{%- assign aim_user_prefix = get_environment_variable("AIM_USER_PREFIX") | downcase -%}
{%- assign aim_unique_suffix = model.migration_target.unique_deployment_id | downcase -%}
{%- if aim_unique_suffix != "" -%}
  {%- assign aim_user_prefix = "" -%}
{%- endif -%}
{%- assign formatted_azure_primary_region = format_region(model.migration_target.azure_primary_region) | downcase -%}
{%- capture message_bus_resource_group_name -%}
{{ aim_user_prefix }}rg-aimmsgbus-{{ model.migration_target.deployment_environment | downcase }}-{{ formatted_azure_primary_region }}-{{ aim_unique_suffix }}
{%- endcapture -%}
{%- capture system_application -%}
systemapplication
{%- endcapture -%}
{%- capture system_application_group -%}
{{ aim_user_prefix }}rg-aimapp-{{ system_application }}-{{ model.migration_target.deployment_environment | downcase }}-{{ formatted_azure_primary_region }}-{{ aim_unique_suffix }}
{%- endcapture -%}
{%- capture integration_account_name -%}
{{ aim_user_prefix }}intacc-aimartifactstore-{{ model.migration_target.deployment_environment | downcase }}-{{ formatted_azure_primary_region }}-{{ aim_unique_suffix }}
{%- endcapture -%}
{%- capture app_config_name -%}
{{ aim_user_prefix }}appcfg-aimrstore-{{ model.migration_target.deployment_environment | downcase }}-{{ aim_unique_suffix }}
{%- endcapture -%}
{%- capture message_constructor_logicapp_name -%}
{{ aim_user_prefix }}logic-aimmessageconstructor-{{ model.migration_target.deployment_environment | downcase }}-{{ aim_unique_suffix }}
{%- endcapture -%}
{%- capture service_bus_namespace_name -%}
{{ aim_user_prefix }}sb-aimmsgbox-{{ model.migration_target.deployment_environment | downcase }}-{{ formatted_azure_primary_region }}-{{ aim_unique_suffix }}
{%- endcapture -%}
{%- capture key_vault_name -%}
{{ aim_user_prefix }}kv-aimrstore-{{ model.migration_target.deployment_environment | downcase }}-{{ aim_unique_suffix }}
{%- endcapture -%}
{%- capture key_vault_apim_subscription_secret_name -%}
aim-apim-subscriptionkey-unlimited
{%- endcapture -%}
{%- capture api_management_service_name -%}
{{ aim_user_prefix }}apim-aimmsgbussvc-{{ model.migration_target.deployment_environment | downcase }}-{{ aim_unique_suffix }}
{%- endcapture -%}
{%- capture routing_slip_router_logicapp_name -%}
{{ aim_user_prefix }}logic-aimroutingsliprouter-{{ model.migration_target.deployment_environment | downcase }}-{{ aim_unique_suffix }}
{%- endcapture -%}
{%- capture get_logic_app_callback_url_role_name -%}
{{ aim_user_prefix | append: ' ' }}{{ 'Get Logic App Callback Url' | append: ' ' }}{{ aim_unique_suffix }}
{%- endcapture -%}
{%- capture gateway_resource_name -%}
{{ aim_user_prefix }}cgw-aimmsgbus-{{ model.migration_target.deployment_environment | downcase }}-{{ formatted_azure_primary_region }}-{{ aim_unique_suffix }}
{%- endcapture -%}
#
# Snippets are groups of files keyed with a snippet name.
#
# Each snippet file is further keyed by the target deployment
# environment to allow for different snippets where target environments might
# require a different shape or settings for the deployment of the generated resource.
#
# The snippet files are text files of any format, but can use the Liquid template
# language during rendering that can use the target model to provide dynamic values
# to the template.
#
# For Liquid information, see:
# https://shopify.github.io/liquid/
# https://www.shopify.co.uk/partners/shopify-cheat-sheet 
#
# The configuration files themselves can also be rendered using the Liquid template language.
#
# Resource types define the type of the content of the snippet, for example, in a workflow
# snippet, it could represent a workflow variable or a workflow activity.  The resource type
# is used to determine how to map from an arbitrary object in the target model to snippet resources.
#
# Workflow Snippets:
#
# Snippets are primarily used to generate custom workflow definitions, as such, all workflow snippet
# resource types start with: microsoft.workflow.
#
# This is followed by the type of the workflow object that the snippet represents:
#
# - workflow: represents the definition and is the entry point boilerplate for the workflow.
# - parameter: represents a parameter for a workflow, such as used in Logic Apps.
# - channel: represents a workflow channel for messages in/out of the workflow.
# - variable: represents a workflow variable that is initialized during the workflow.
# - message: represents a workflow message that is received/sent by a workflow.
# - activitycontainer: represents a workflow activity that is a group of other activities.
# - activity: represents a workflow activity that performs an action.
# - action: represents a pre-built boilerplate actions, such as calling a routing slip router.
#
# There are some pre-built workflow activities to perform specific functions, such as
# getconfiguration or callroutingsliprouter.  These are boilerplate drop-ins to a workflow.
#

# A resource snippet provides a set of files that are rendered as part of the
# Convert stage of the AIM tool.
resourceSnippets:

  # ------------------------------------------------------------------------------
  # Activatable Workflow Snippets
  # ------------------------------------------------------------------------------

{%- for application in model.migration_target.message_bus.applications %}
  {%- assign app_name = application.name | remove: " " | replace: ".", "-" | replace: ":", "-" -%}
  {%- for intermediary in application.intermediaries %}
    {%- if intermediary.intermediary_type == "MessageRouter" and intermediary.message_router_type == "ProcessManager" and intermediary.activator == true %}
      {% assign intermediary_name = intermediary.name | remove: " " | replace: ".", "-" | replace: "/", "-" | replace: ":", "-" %}
  # ------------------------------------------------------------------------------
  # Workflow Definitions
  # ------------------------------------------------------------------------------

  - snippet: activatableWorkflowDefinitionConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-{{ app_name | downcase }}{{ intermediary_name | downcase }}-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.workflowdefinition
    parameters:
      - azure_primary_region: {{ model.migration_target.azure_primary_region }}
      - azure_secondary_region: {{ model.migration_target.azure_secondary_region }}
      - azure_subscription_id: {{ model.migration_target.azure_subscription_id }}
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/activatable/processmanager.workflowdefinition.snippet.json

  - snippet: activatableWorkflowDefinitionStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-{{ app_name | downcase }}{{ intermediary_name | downcase }}-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.workflowdefinition
    parameters:
      - azure_primary_region: {{ model.migration_target.azure_primary_region }}
      - azure_secondary_region: {{ model.migration_target.azure_secondary_region }}
      - azure_subscription_id: {{ model.migration_target.azure_subscription_id }}
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/activatable/processmanager.workflowdefinition.snippet.json

  # ------------------------------------------------------------------------------
  # Parameter Definitions
  # ------------------------------------------------------------------------------

  - snippet: activatableWorkflowParametersDefinitionConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-{{ app_name | downcase }}{{ intermediary_name | downcase }}-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parametersdefinition
    parameters:
      - azure_primary_region: {{ model.migration_target.azure_primary_region }}
      - azure_secondary_region: {{ model.migration_target.azure_secondary_region }}
      - azure_subscription_id: {{ model.migration_target.azure_subscription_id }}
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/activatable/processmanager.parametersdefinition.snippet.json

  - snippet: activatableWorkflowParametersDefinitionStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-{{ app_name | downcase }}{{ intermediary_name | downcase }}-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.parameters
    parameters:
      - azure_primary_region: {{ model.migration_target.azure_primary_region }}
      - azure_secondary_region: {{ model.migration_target.azure_secondary_region }}
      - azure_subscription_id: {{ model.migration_target.azure_subscription_id }}
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/activatable/processmanager.parameters.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Local Parameter Definitions
  # ------------------------------------------------------------------------------

  - snippet: activatableWorkflowLocalParametersDefinitionStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-{{ app_name | downcase }}{{ intermediary_name | downcase }}-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.localparameters
    parameters:
      - azure_primary_region: {{ model.migration_target.azure_primary_region }}
      - azure_secondary_region: {{ model.migration_target.azure_secondary_region }}
      - azure_subscription_id: {{ model.migration_target.azure_subscription_id }}
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/activatable/processmanager.parameters.local.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # App Settings Definitions
  # ------------------------------------------------------------------------------

  - snippet: activatableWorkflowAppSettingsDefinitionStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-{{ app_name | downcase }}{{ intermediary_name | downcase }}-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.appsettings
    parameters:
      - azure_primary_region: {{ model.migration_target.azure_primary_region }}
      - azure_secondary_region: {{ model.migration_target.azure_secondary_region }}
      - azure_subscription_id: {{ model.migration_target.azure_subscription_id }}
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/activatable/processmanager.appsettings.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Local App Settings Definitions
  # ------------------------------------------------------------------------------

  - snippet: activatableWorkflowLocalAppSettingsDefinitionStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-{{ app_name | downcase }}{{ intermediary_name | downcase }}-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.localappsettings
    parameters:
      - azure_primary_region: {{ model.migration_target.azure_primary_region }}
      - azure_secondary_region: {{ model.migration_target.azure_secondary_region }}
      - azure_subscription_id: {{ model.migration_target.azure_subscription_id }}
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/activatable/processmanager.appsettings.local.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Connections Definitions
  # ------------------------------------------------------------------------------

  - snippet: activatableWorkflowConnectionsDefinitionStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-{{ app_name | downcase }}{{ intermediary_name | downcase }}-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.connections
    parameters:
      - azure_primary_region: {{ model.migration_target.azure_primary_region }}
      - azure_secondary_region: {{ model.migration_target.azure_secondary_region }}
      - azure_subscription_id: {{ model.migration_target.azure_subscription_id }}
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/activatable/processmanager.connections.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Workflow Channels
  # ------------------------------------------------------------------------------

  - snippet: channelServiceBusTopicTriggerConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-channel-servicebustopictrigger-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.channel.trigger.servicebustopic
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/activatable/processmanager.channel.trigger.servicebustopic.snippet.json

  - snippet: channelServiceBusTopicTriggerStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-channel-servicebustopictrigger-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.channel.trigger.servicebustopic
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/activatable/processmanager.channel.trigger.servicebustopic.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Workflow Activity Containers
  # ------------------------------------------------------------------------------

  - snippet: activityContainerWorkflowConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activitycontainer-workflow-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.activitycontainer.workflow
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/activatable/processmanager.activitycontainer.workflow.snippet.json.liquid

  - snippet: activityContainerWorkflowStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activitycontainer-workflow-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.activitycontainer.workflow
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/activatable/processmanager.activitycontainer.workflow.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Pre-Built Actions
  # ------------------------------------------------------------------------------

  - snippet: actionDecodeServiceBusMessageConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activitycontainer-workflow-decodeservicebusmessage-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.activitycontainer.workflow.decodeservicebusmessage
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/activatable/processmanager.activitycontainer.workflow.sbmsg.snippet.json.liquid

  - snippet: actionDecodeServiceBusMessageStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activitycontainer-workflow-decodeservicebusmessage-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.activitycontainer.workflow.decodeservicebusmessage
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/activatable/processmanager.activitycontainer.workflow.sbmsg.snippet.json.liquid

    {%- endif %}
  {%- endfor %}
{%- endfor %}

  # ------------------------------------------------------------------------------
  # Invokable Workflow Snippets
  # ------------------------------------------------------------------------------

{%- for application in model.migration_target.message_bus.applications %}
  {%- assign app_name = application.name | remove: " " | replace: ".", "-" | replace: ":", "-" -%}
  {%- for intermediary in application.intermediaries %}
    {%- if intermediary.intermediary_type == "MessageRouter" and intermediary.message_router_type == "ProcessManager" and intermediary.activator == false %}
      {% assign intermediary_name = intermediary.name | remove: " " | replace: ".", "-" | replace: "/", "-" | replace: ":", "-" %}
  # ------------------------------------------------------------------------------
  # Workflow Definitions
  # ------------------------------------------------------------------------------

  - snippet: invokableWorkflowDefinitionConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-{{ app_name | downcase }}{{ intermediary_name | downcase }}-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.workflowdefinition
    parameters:
      - azure_primary_region: {{ model.migration_target.azure_primary_region }}
      - azure_secondary_region: {{ model.migration_target.azure_secondary_region }}
      - azure_subscription_id: {{ model.migration_target.azure_subscription_id }}
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/invokable/processmanager.workflowdefinition.snippet.json

  - snippet: invokableWorkflowDefinitionStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-{{ app_name | downcase }}{{ intermediary_name | downcase }}-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.workflowdefinition
    parameters:
      - azure_primary_region: {{ model.migration_target.azure_primary_region }}
      - azure_secondary_region: {{ model.migration_target.azure_secondary_region }}
      - azure_subscription_id: {{ model.migration_target.azure_subscription_id }}
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/invokable/processmanager.workflowdefinition.snippet.json

  # ------------------------------------------------------------------------------
  # Parameter Definitions
  # ------------------------------------------------------------------------------

  - snippet: invokableWorkflowParametersDefinitionConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-{{ app_name | downcase }}{{ intermediary_name | downcase }}-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parametersdefinition
    parameters:
      - azure_primary_region: {{ model.migration_target.azure_primary_region }}
      - azure_secondary_region: {{ model.migration_target.azure_secondary_region }}
      - azure_subscription_id: {{ model.migration_target.azure_subscription_id }}
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/invokable/processmanager.parametersdefinition.snippet.json

  - snippet: invokableWorkflowParametersDefinitionStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-{{ app_name | downcase }}{{ intermediary_name | downcase }}-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.parameters
    parameters:
      - azure_primary_region: {{ model.migration_target.azure_primary_region }}
      - azure_secondary_region: {{ model.migration_target.azure_secondary_region }}
      - azure_subscription_id: {{ model.migration_target.azure_subscription_id }}
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/invokable/processmanager.parameters.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Local Parameter Definitions
  # ------------------------------------------------------------------------------

  - snippet: invokableWorkflowLocalParametersDefinitionStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-{{ app_name | downcase }}{{ intermediary_name | downcase }}-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.localparameters
    parameters:
      - azure_primary_region: {{ model.migration_target.azure_primary_region }}
      - azure_secondary_region: {{ model.migration_target.azure_secondary_region }}
      - azure_subscription_id: {{ model.migration_target.azure_subscription_id }}
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/invokable/processmanager.parameters.local.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # App Settings Definitions
  # ------------------------------------------------------------------------------

  - snippet: invokableWorkflowAppSettingsDefinitionStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-{{ app_name | downcase }}{{ intermediary_name | downcase }}-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.appsettings
    parameters:
      - azure_primary_region: {{ model.migration_target.azure_primary_region }}
      - azure_secondary_region: {{ model.migration_target.azure_secondary_region }}
      - azure_subscription_id: {{ model.migration_target.azure_subscription_id }}
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/invokable/processmanager.appsettings.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Local App Settings Definitions
  # ------------------------------------------------------------------------------

  - snippet: invokableWorkflowLocalAppSettingsDefinitionStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-{{ app_name | downcase }}{{ intermediary_name | downcase }}-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.localappsettings
    parameters:
      - azure_primary_region: {{ model.migration_target.azure_primary_region }}
      - azure_secondary_region: {{ model.migration_target.azure_secondary_region }}
      - azure_subscription_id: {{ model.migration_target.azure_subscription_id }}
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/invokable/processmanager.appsettings.local.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Connections Definitions
  # ------------------------------------------------------------------------------

  - snippet: invokableWorkflowConnectionsDefinitionStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-{{ app_name | downcase }}{{ intermediary_name | downcase }}-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.connections
    parameters:
      - azure_primary_region: {{ model.migration_target.azure_primary_region }}
      - azure_secondary_region: {{ model.migration_target.azure_secondary_region }}
      - azure_subscription_id: {{ model.migration_target.azure_subscription_id }}
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/invokable/processmanager.connections.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Workflow Channels
  # ------------------------------------------------------------------------------

  - snippet: channelHttpTriggerConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-channel-httptrigger-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.channel.trigger.http
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/invokable/processmanager.channel.trigger.http.snippet.json

  - snippet: channelHttpTriggerStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-channel-httptrigger-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.channel.trigger.http
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/invokable/processmanager.channel.trigger.http.snippet.json
    {%- endif %}
  {%- endfor %}
{%- endfor %}

  # ------------------------------------------------------------------------------
  # Common Workflow Snippets
  # ------------------------------------------------------------------------------

{%- for application in model.migration_target.message_bus.applications %}
  {%- assign app_name = application.name | remove: " " | replace: ".", "-" | replace: ":", "-" -%}
  {%- for intermediary in application.intermediaries %}
    {%- if intermediary.intermediary_type == "MessageRouter" and intermediary.message_router_type == "ProcessManager" %}
      {% assign intermediary_name = intermediary.name | remove: " " | replace: ".", "-" | replace: "/", "-" | replace: ":", "-" %}
  # ------------------------------------------------------------------------------
  # Workflow Parameters - Consumption
  # ------------------------------------------------------------------------------

  - snippet: parameterMessageBusResourceGroupConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-messagebusresourcegroup-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.messagebusresourcegroup.snippet.json

  - snippet: parameterSystemApplicationResourceGroupConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-systemapplicationresourcegroup-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.systemapplicationresourcegroup.snippet.json

  - snippet: parameterApimServiceConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-apimservice-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.apimservice.snippet.json

  - snippet: parameterApimRetryPolicyConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-apimretrypolicy-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.apimretrypolicy.snippet.json

  - snippet: parameterApimSubscriptionKeyConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-apimsubscriptionkey-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.apimsubscriptionkey.snippet.json

  - snippet: parameterMessageSuspendProcessorLogicAppConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-messagesuspendprocessorlogicapp-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.messagesuspendprocessorlogicapp.snippet.json

  - snippet: parameterSuspendQueueTopicConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-suspendqueuetopic-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.suspendqueuetopic.snippet.json

  - snippet: parameterRoutingSlipRouterLogicAppConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-routingsliprouterlogicapp-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.routingsliprouterlogicapp.snippet.json

  - snippet: parameterRoutingSlipRouterRetryPolicyConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-routingsliprouterretrypolicy-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.routingsliprouterretrypolicy.snippet.json

  - snippet: parameterIntegrationAccountConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-integrationaccount-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.integrationaccount.snippet.json

  - snippet: parameterServiceBusTopicPublishApiConnectionConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-servicebustopicpublishapiconnection-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.sbtopicpublishapiconnection.snippet.json

  - snippet: parameterServiceBusTopicSubscribeApiConnectionConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-servicebustopicsubscribeapiconnection-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.sbtopicsubscribeapiconnection.snippet.json

  - snippet: parameterServiceBusTopicConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-servicebustopic-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.servicebustopic.snippet.json

  - snippet: parameterServiceBusTopicSubscriptionConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-servicebustopicsubscription-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.servicebustopicsubscription.snippet.json

  - snippet: parameterServiceBusRecurrenceFrequencyConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-servicebusrecurrencefrequency-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.servicebusrecurrencefrequency.snippet.json

  - snippet: parameterServiceBusRecurrenceIntervalConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-servicebusrecurrenceinterval-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.servicebusrecurrenceinterval.snippet.json.liquid

  - snippet: parameterScenarioConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-scenario-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.scenario.snippet.json

  - snippet: parameterScenarioStepConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-scenariostep-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.scenariostep.snippet.json

  - snippet: parameterTagsConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-tags-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.parameter.tags.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Workflow Parameters - Standard
  # ------------------------------------------------------------------------------

  - snippet: parameterServiceBusTopicStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-servicebustopic-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.parameter.servicebustopic.snippet.json

  - snippet: parameterServiceBusTopicSubscriptionStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-servicebustopicsubscription-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.parameter.servicebustopicsubscription.snippet.json

  - snippet: parameterScenarioStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-scenario-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.parameter.scenario.snippet.json

  - snippet: parameterScenarioStepStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-parameter-scenariostep-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.parameter
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/workflows/application.logic.workflows/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.parameter.scenariostep.snippet.json

  # ------------------------------------------------------------------------------
  # Workflow Properties - Consumption
  # ------------------------------------------------------------------------------

  - snippet: propertyTagsConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-property-tags-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.property
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.property.tags.snippet.json

  - snippet: propertyIntegrationAccountConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-property-integrationaccount-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.property
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.property.integrationaccount.snippet.json

  # ------------------------------------------------------------------------------
  # Workflow Channels - Consumption
  # ------------------------------------------------------------------------------

  - snippet: channelServiceBusTopicSendConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-channel-servicebustopicsend-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.channel.send.servicebustopic
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.channel.send.servicebustopic.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Workflow Channels - Standard
  # ------------------------------------------------------------------------------

  - snippet: channelServiceBusTopicSendStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-channel-servicebustopicsend-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.channel.send.servicebustopic
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.channel.send.servicebustopic.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Workflow ARM Template Variables - Consumption
  # ------------------------------------------------------------------------------

  - snippet: variableApimServiceConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-apimservice-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.variable.apimservice.snippet.json

  - snippet: variableConfigurationManagerConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-configurationmanager-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.variable.configurationmanager.snippet.json

  - snippet: variableIntegrationAccountConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-integrationaccount-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.variable.integrationaccount.snippet.json

  - snippet: variableServiceBusPublishApiConnectionConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-servicebustopicpublishapiconnection-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.variable.sbtopicpublishapiconnection.snippet.json

  - snippet: variableServiceBusSubscribeApiConnectionConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-servicebustopicsubscribeapiconnection-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.variable.sbtopicsubscribeapiconnection.snippet.json

  - snippet: variableMessagingManagerConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-messagingmanager-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.variable.messagingmanager.snippet.json

  - snippet: variableRoutingManagerConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-routingmanager-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.variable.routingmanager.snippet.json

  - snippet: variableRoutingSlipRouterLogicAppConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-routingsliprouterlogicapp-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.variable.routingsliprouterlogicapp.snippet.json

  - snippet: variableMessageSuspendProcessorLogicAppConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-messagesuspendprocessorlogicapp-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.variable.messagesuspendprocessorlogicapp.snippet.json

  # ------------------------------------------------------------------------------
  # Workflow Variables - Consumption
  # ------------------------------------------------------------------------------

  - snippet: variableInitializeConfigurationConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-initializeconfiguration-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.variable.initialize.configuration.snippet.json

  - snippet: variableInitializeErrorMessageConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-initializeerrormessage-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.variable.initialize.errormessage.snippet.json

  - snippet: variableInitializeFaultMessageConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-initializefaultmessage-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.variable.initialize.faultmessage.snippet.json

  - snippet: variableInitializeMessageTypeConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-initializemessagetype-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.variable.initialize.messagetype.snippet.json

  - snippet: variableInitializeStatusCodeConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-initializestatuscode-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.variable.initialize.statuscode.snippet.json

  - snippet: variablePlaceHolderConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-placeholder-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.variable.placeholder
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.variable.placeholder.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Workflow Variables - Standard
  # ------------------------------------------------------------------------------

  - snippet: variableInitializeConfigurationStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-initializeconfiguration-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.variable.initialize.configuration.snippet.json

  - snippet: variableInitializeErrorMessageStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-initializeerrormessage-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.variable.initialize.errormessage.snippet.json

  - snippet: variableInitializeFaultMessageStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-initializefaultmessage-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.variable.initialize.faultmessage.snippet.json

  - snippet: variableInitializeMessageTypeStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-initializemessagetype-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.variable.initialize.messagetype.snippet.json

  - snippet: variableInitializeStatusCodeStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-initializestatuscode-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.variable
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.variable.initialize.statuscode.snippet.json

  - snippet: variablePlaceHolderStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-placeholder-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.variable.placeholder
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.variable.placeholder.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Workflow Messages - Consumption
  # ------------------------------------------------------------------------------

  - snippet: messagePlaceHolderConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-placeholder-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.message.placeholder
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.message.placeholder.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Workflow Messages - Standard
  # ------------------------------------------------------------------------------

  - snippet: messagePlaceHolderStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-variable-placeholder-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.message.placeholder
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.message.placeholder.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Workflow Activity Containers - Consumption
  # ------------------------------------------------------------------------------

  - snippet: activityContainerTaskConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activitycontainer-task-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.activitycontainer.task
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.activitycontainer.task.snippet.json.liquid

  - snippet: activityContainerDecisionConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activitycontainer-decision-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.activitycontainer.decision
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.activitycontainer.decision.snippet.json.liquid

  - snippet: activityContainerDecisionBranchConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activitycontainer-decisionbranch-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.activitycontainer.decisionbranch
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.activitycontainer.decisionbranch.snippet.json.liquid

  - snippet: activityContainerPlaceHolderConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activitycontainer-placeholder-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.activitycontainer.placeholder
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.activitycontainer.placeholder.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Workflow Activity Containers - Standard
  # ------------------------------------------------------------------------------

  - snippet: activityContainerTaskStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activitycontainer-task-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.activitycontainer.task
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.activitycontainer.task.snippet.json.liquid

  - snippet: activityContainerDecisionStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activitycontainer-decision-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.activitycontainer.decision
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.activitycontainer.decision.snippet.json.liquid

  - snippet: activityContainerDecisionBranchStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activitycontainer-decisionbranch-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.activitycontainer.decisionbranch
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.activitycontainer.decisionbranch.snippet.json.liquid

  - snippet: activityContainerPlaceHolderStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activitycontainer-placeholder-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.activitycontainer.placeholder
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.activitycontainer.placeholder.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Workflow Activities - Consumption
  # ------------------------------------------------------------------------------

  - snippet: activityPlaceHolderConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activity-placeholder-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.activity.placeholder
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.activity.placeholder.snippet.json.liquid

  - snippet: activityCodeExpressionConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activity-codeexpression-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.activity.codeexpression
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.activity.codeexpression.snippet.json.liquid

  - snippet: activityMessageTransformConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activity-messagetransform-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.activity.messagetransform
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.activity.messagetransform.snippet.json.liquid

  - snippet: activityMessageConstructionConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activity-messageconstruction-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.activity.messageconstruction
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.activity.messageconstruction.snippet.json.liquid

  - snippet: activityInvokeWorkflowConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activity-invokeworkflow-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.activity.invokeworkflow
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.activity.invokeworkflow.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Workflow Activities - Standard
  # ------------------------------------------------------------------------------

  - snippet: activityPlaceHolderStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activity-placeholder-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.activity.placeholder
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.activity.placeholder.snippet.json.liquid

  - snippet: activityCodeExpressionStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activity-codeexpression-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.activity.codeexpression
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.activity.codeexpression.snippet.json.liquid

  - snippet: activityMessageTransformStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activity-messagetransform-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.activity.messagetransform
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.activity.messagetransform.snippet.json.liquid

  - snippet: activityMessageConstructionStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activity-messageconstruction-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.activity.messageconstruction
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.activity.messageconstruction.snippet.json.liquid

  - snippet: activityInvokeWorkflowStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activity-invokeworkflow-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.activity.invokeworkflow
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.activity.invokeworkflow.snippet.json.liquid

  # ------------------------------------------------------------------------------
  # Pre-Built Actions - Consumption
  # ------------------------------------------------------------------------------

  - snippet: actionGetConfigurationConsumption{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activitycontainer-workflow-getconfiguration-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.consumption.activitycontainer.workflow.getconfiguration
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/consumption/common/processmanager.activitycontainer.workflow.getconfig.snippet.json

  # ------------------------------------------------------------------------------
  # Pre-Built Actions - Standard
  # ------------------------------------------------------------------------------

  - snippet: actionGetConfigurationStandard{{ app_name }}{{ intermediary_name }}
    snippetType: microsoft.snippet.json
    resourceName: workflow-activitycontainer-workflow-getconfiguration-{{ model.migration_target.deployment_environment | downcase }}
    resourceType: microsoft.workflows.azurelogicapp.standard.activitycontainer.workflow.getconfiguration
    outputPath: applications/{{ app_name | to_safe_file_path | downcase }}/intermediaries/{{ intermediary_name | to_safe_file_path | downcase }}/snippets
    files:
      - env: ['dev', 'prod']
        path: intermediaries/processmanager/snippets/standard/common/processmanager.activitycontainer.workflow.getconfig.snippet.json.liquid
    {%- endif %}
  {%- endfor %}
{%- endfor %}
